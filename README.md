# Desafio T√©cnico ‚Äì Consulta de Cr√©ditos
<img src="https://img.shields.io/badge/Dev-Caio_Aurelio-informational?style=flat-square&logoColor=white&color=cdcdcd" />

Este reposit√≥rio cont√©m a solu√ß√£o para o desafio t√©cnico de desenvolvimento de uma **API RESTful em Spring Boot** e um **front-end em Angular**, containerizados via Docker.

---

## üìå Objetivo

- Implementar uma API RESTful que consulta **cr√©ditos constitu√≠dos**.
- Desenvolver um front-end em Angular para consumir a API e apresentar os dados ao usu√°rio.
- Containerizar toda a solu√ß√£o (API + Front + Banco).
- Entregar c√≥digo limpo, organizado e com README explicativo.

---

## üöÄ Tecnologias Utilizadas

- **Back-end**
  - Java 17 (compat√≠vel com Java 8+ conforme requisito)
  - Spring Boot
  - Spring Data JPA + Hibernate
  - PostgreSQL (ou MariaDB)
  - JUnit e Mockito (testes automatizados)

- **Front-end**
  - Angular 18
  - Angular Material
  - RxJS / HttpClient
  - Docker + Nginx

- **Infraestrutura**
  - Docker / Docker Compose
  - Mensageria (extra): Kafka ou Azure Service Bus (opcional)

---

## üìÇ Estrutura do Projeto

```bash
pr-consulta-credito-Api/
‚îÇ
‚îú‚îÄ‚îÄ consulta-creditos-api # Back-end Spring Boot
‚îÇ ‚îú‚îÄ‚îÄ src/main/java/... # C√≥digo fonte
‚îÇ ‚îú‚îÄ‚îÄ src/test/java/... # Testes JUnit/Mockito
‚îÇ ‚îú‚îÄ‚îÄ pom.xml # Build Maven
‚îÇ
‚îú‚îÄ‚îÄ consulta-creditos-web # Front-end Angular
‚îÇ ‚îú‚îÄ‚îÄ src/app/... # C√≥digo Angular
‚îÇ ‚îú‚îÄ‚îÄ Dockerfile # Build do front
‚îÇ ‚îî‚îÄ‚îÄ nginx.conf # Configura√ß√£o do Nginx
‚îÇ
‚îú‚îÄ‚îÄ docker-compose.yml # Orquestra√ß√£o (API + Web + DB)
‚îú‚îÄ‚îÄ EsquemaSQL.pdf # Modelagem do banco
‚îú‚îÄ‚îÄ execucaoApp.pdf # Guia de execu√ß√£o
‚îî‚îÄ‚îÄ README.md # Este documento
```

---

## üóÑÔ∏è Banco de Dados

### Script de cria√ß√£o
```sql
CREATE TABLE credito
(
 id BIGINT GENERATED BY DEFAULT AS IDENTITY,
 numero_credito VARCHAR(50) NOT NULL,
 numero_nfse VARCHAR(50) NOT NULL,
 data_constituicao DATE NOT NULL,
 valor_issqn DECIMAL(15, 2) NOT NULL,
 tipo_credito VARCHAR(50) NOT NULL,
 simples_nacional BOOLEAN NOT NULL,
 aliquota DECIMAL(5, 2) NOT NULL,
 valor_faturado DECIMAL(15, 2) NOT NULL,
 valor_deducao DECIMAL(15, 2) NOT NULL,
 base_calculo DECIMAL(15, 2) NOT NULL
);

-- Script de popula√ß√£o
INSERT INTO credito (numero_credito, numero_nfse, data_constituicao, valor_issqn,
tipo_credito, simples_nacional, aliquota, valor_faturado, valor_deducao, base_calculo)
VALUES
('123456', '7891011', '2024-02-25', 1500.75, 'ISSQN', true, 5.0, 30000.00, 5000.00, 25000.00),
('789012', '7891011', '2024-02-26', 1200.50, 'ISSQN', false, 4.5, 25000.00, 4000.00, 21000.00),
('654321', '1122334', '2024-01-15', 800.50, 'Outros', true, 3.5, 20000.00, 3000.00, 17000.00);

```

### Endpoints da API

#### Buscar por NFS-e

```bash
GET /api/creditos/{numeroNfse}

Resposta:

[
  {
    "numeroCredito": "123456",
    "numeroNfse": "7891011",
    "dataConstituicao": "2024-02-25",
    "valorIssqn": 1500.75,
    "tipoCredito": "ISSQN",
    "simplesNacional": "Sim",
    "aliquota": 5.0,
    "valorFaturado": 30000.00,
    "valorDeducao": 5000.00,
    "baseCalculo": 25000.00
  }
]
```

#### Buscar por n√∫mero do cr√©dito

```bash
GET /api/creditos/credito/{numeroCredito}

Resposta:

{
  "numeroCredito": "123456",
  "numeroNfse": "7891011",
  "dataConstituicao": "2024-02-25",
  "valorIssqn": 1500.75,
  "tipoCredito": "ISSQN",
  "simplesNacional": "Sim",
  "aliquota": 5.0,
  "valorFaturado": 30000.00,
  "valorDeducao": 5000.00,
  "baseCalculo": 25000.00
}
```

##üíª Front-end

### Funcionalidades:

- Tela de consulta por NFS-e ou N√∫mero do Cr√©dito
- Tabela paginada e orden√°vel (Angular Material)
- Dialog de detalhes
- Responsivo para dispositivos m√≥veis

## üöÄ Como Executar

### Op√ß√£o 1: Docker Compose (Recomendado)

**Windows:**
```bash
# Executar script automatizado
start-docker.bat

# Ou manualmente
docker-compose up --build
```

**Linux/Mac:**
```bash
# Executar script automatizado
./start-docker.sh

# Ou manualmente
docker-compose up --build
```

**Acessos:**
- Frontend: http://localhost:8081
- Backend API: http://localhost:8080
- Swagger UI: http://localhost:8080/swagger-ui
- API Docs: http://localhost:8080/v3/api-docs

### Op√ß√£o 2: Desenvolvimento Local

**Windows:**
```bash
# Executar script automatizado
start-local.bat
```

**Linux/Mac:**
```bash
# Executar script automatizado
./start-local.sh
```

**Acessos:**
- Frontend: http://localhost:4200
- Backend API: http://localhost:8080
- Swagger UI: http://localhost:8080/swagger-ui
- API Docs: http://localhost:8080/v3/api-docs

### Configura√ß√£o de Portas

| Servi√ßo | Local | Docker |
|---------|-------|--------|
| Frontend | 4200 | 8081 |
| Backend | 8080 | 8080 |
| Database | 5432 | 5432 |

> **Nota:** Todas as configura√ß√µes de proxy foram corrigidas para garantir comunica√ß√£o correta entre frontend e backend.




## ‚úÖ Crit√©rios Atendidos

- API em Spring Boot com endpoints solicitados
- Front-end Angular consumindo a API
- Banco PostgreSQL com tabela e dados iniciais
- Docker Compose para subir API, Front e Banco
- C√≥digo limpo e organizado
- Documenta√ß√£o com instru√ß√µes de execu√ß√£o
